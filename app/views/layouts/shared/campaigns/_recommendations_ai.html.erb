<turbo-frame id="campaign_recommendations_ai">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">üîç Recomendaciones Inteligentes por IA</h5>
      <small class="text-muted">La IA sugiere rubros ideales para tu campa√±a</small>
    </div>

    <div class="card-body">
      <% if @campaign.present? %>
        <div class="mb-4">
          <label class="form-label fw-bold">Contenido actual de la campa√±a</label>
          <div class="border rounded p-3 bg-light">
            <%= simple_format(@campaign.body.truncate(300)) %>
          </div>
        </div>
      <% end %>

      <% if @recommended_industries.present? %>
        <h6 class="fw-bold">üß† Rubros sugeridos</h6>
        <div class="row">
          <% @recommended_industries.each do |industry| %>
            <div class="col-md-4 mb-3">
              <div class="card border shadow-sm h-100">
                <div class="card-body">
                  <h6 class="card-title mb-1"><i class="bx bx-bulb text-info me-1"></i><%= industry.name %></h6>
                  <p class="card-text small text-muted">
                    Afinidad: <strong><%= industry.score %>%</strong><br>
                    Motivo: <%= industry.reason %>
                  </p>
                  <%= button_to "Usar este rubro", select_industry_path(industry.id), method: :post, class: "btn btn-sm btn-primary w-100" %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="text-center py-5">
          <lord-icon
            src="https://cdn.lordicon.com/zpxybbhl.json"
            trigger="loop"
            delay="2000"
            colors="primary:#6c757d,secondary:#dee2e6"
            style="width:100px;height:100px">
          </lord-icon>
          <p class="mt-3">La IA a√∫n no ha generado recomendaciones. Aseg√∫rate de haber completado el contenido de tu campa√±a.</p>
        </div>
      <% end %>
    </div>
  </div>
</turbo-frame>
